apiVersion: v1
kind: Service
metadata:
  annotations:
    kompose.cmd: kompose -f docker-compose.yml convert
    kompose.version: 1.17.0 (a74acad)
  getambassador.io/config: |
    ---
    apiVersion: ambassador/v1
    kind:  Mapping
    name:  platform-auth-user-restricted-tokens
    prefix: "/v1/users/[^/]+/restricted_tokens"
    prefix_regex: true
    method: "GET|POST|DELETE"
    method_regex: true
    rewrite: ""
    service: platform-auth:{{.Values.platform.auth.port}}   
    ---
    apiVersion: ambassador/v1
    kind:  Mapping
    name:  platform-auth-user-provider-sessions
    prefix: "/v1/users/[^/]+/provider_sessions"
    prefix_regex: true
    method: "GET|POST|DELETE"
    method_regex: true
    rewrite: ""
    service: platform-auth:{{.Values.platform.auth.port}}   
    ---
    apiVersion: ambassador/v1
    kind:  Mapping
    name:  platform-auth-restricted-tokens
    prefix: "/v1/restricted_tokens"
    method: "GET|PUT|DELETE"
    method_regex: true
    rewrite: ""
    service: platform-auth:{{.Values.platform.auth.port}}   
    ---
    apiVersion: ambassador/v1
    kind:  Mapping
    name:  platform-auth-provider-sessions
    prefix: "/v1/provider_sessions/[^/]+"
    method: "GET|PUT|DELETE"
    method_regex: true
    rewrite: ""
    service: platform-auth:{{.Values.platform.auth.port}}   
    ---
    apiVersion: ambassador/v1
    kind:  Mapping
    name:  platform-auth-oauth
    prefix: "/v1/oauth/[^/]+/authorize"
    method: "GET|DELETE"
    method_regex: true
    rewrite: ""
    service: platform-auth:{{.Values.platform.auth.port}}
    ---
    apiVersion: ambassador/v1
    kind:  Mapping
    name:  platform-auth-oauth
    prefix: "/v1/oauth/[^/]+/redirect"
    method: "GET"
    method_regex: true
    rewrite: ""
    service: platform-auth:{{.Values.platform.auth.port}}   
  creationTimestamp: null
  labels:
    io.kompose.service: platform-auth
  name: platform-auth
spec:
  ports:
  - name: "{{.Values.platform.auth.port}}"
    port: {{.Values.platform.auth.port}}
    targetPort: {{.Values.platform.auth.port}}
  selector:
    io.kompose.service: platform-auth
status:
  loadBalancer: {}
