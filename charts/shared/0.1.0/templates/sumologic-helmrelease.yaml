{{ if .Values.sumologic.helmrelease.create }}
---
apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: sumologic
  namespace: {{ .Values.sumologic.namespace.name }}
  annotations:
    flux.weave.works/automated: "true" 
spec:
  releaseName: sumologic
  chart:
    {{- .Values.sumologic.helmrelease.chart | toYaml | nindent 4 }}
  values:
    sumologic:
      collectorUrlExistingSecret:  {{ .Values.sumologic.secret.name }}
      sourceCategoryPrefix: {{ .Values.cluster.eks.name }}
      readFromHead: false
    rbac:
      create: true
{{ end }}
