{{ if .Values.sumologic.enabled }}
---
apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: sumologic-fluentd
  namespace: sumologic
  annotations:
    flux.weave.works/automated: "true" 
spec:
  releaseName: sumologic-fluentd
  chart:
    {{- .Values.sumologicFluentd.chart | toYaml | nindent 4 }}
  values:
    sumologic:
      collectorUrlExistingSecret:  {{ .Values.sumologic.secretName | default "sumologic" }}
      sourceCategoryPrefix: {{ .Values.global.cluster.name }}
      readFromHead: false
    rbac:
      create: true
{{ end }}
