{{ if .Values.certmanager.helmrelease.create }}
---
apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: certmanager
  namespace: {{ .Values.certmanager.namespace.name }}
  annotations:
    flux.weave.works/automated: "false"
spec:
  releaseName: certmanager
  chart:
    {{- .Values.certmanager.helmrelease.chart | toYaml | nindent 4 }}
  values:
    podAnnotations:
      iam.amazonaws.com/role: {{ include "charts.certmanager.role" . }}
{{ end }}
