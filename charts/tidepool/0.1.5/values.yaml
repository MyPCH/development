gloo:
  enabled: true
  namespace:
    create: false
  gatewayProxies:
    gateway-proxy:
      service:
        httpPort: 3000                                               # HTTP port to listen on
        httpsPort: 8443                                              # HTTPS port to listen on
        type: ClusterIP                                              # Type of service to create (alternative: ClusterIP)
        #extraAnnotations:                                           # Use to create an AWS Network Load Balancer 
          #service.beta.kubernetes.io/aws-load-balancer-type: "nlb"
mongodb:
  enabled: true
  image:
    tag: "3.6"
  persistence:
    enabled: false
  fullnameOverride: "mongodb"
  usePassword: false
global:
  gateway:
    #httpPort: 80                                                     # to create an external HTTP gateway on port 80
    #httpsPort: 443                                                   # to create an external HTTPS gateway on port 443
    proxy:                                                            # proxy if embedded gloo gateway is disabled.
      name: gateway-proxy                                             # the name of the API gateway service (unused if gloo.enabled)
      namespace: gloo-system                                          # the namespace of the API gateway proxy service  (unused if gloo.enabled)
  store: 
    #type: s3                                                         # store non-Mongo data in S3
    type: file                                                        # store non-Mongo data on file system
  secrets:
    external:
      #source: "awsSecretsManager"                                    # external secrets are loaded from aws
      source: "local"                                                 # external secrets are by other means
    internal:
      source: "helm"                                                  # internal secrets are randominly generated 
      #source: "awsSecretsManager"                                    # internal secrets are loaded from aws
      #source: "other"                                                # internal secrets are provided by other means
  linkerd: disabled
  ports:
    blip: 3000                                                        # blip service internal port
    export: 9300                                                      # export service internal port
    gatekeeper: 9123                                                  # gatekeeper service internal port
    highwater: 9191                                                   # highwater service internal port
    hydrophone: 9157                                                  # hydrophone service internal port
    jellyfish: 9122                                                   # jellyfish service internal port
    messageapi: 9119                                                  # messageapi service internal port
    auth: 9222                                                        # auth service internal port
    blob: 9225                                                        # blob service internal port
    data: 9220                                                        # data service internal port
    image: 9226                                                       # image service internal port
    notification: 9223                                                # notification service internal port
    task: 9224                                                        # task service internal port
    user: 9221                                                        # user service internal port
    seagull: 9120                                                     # seagull service internal port
    shoreline: 9107                                                   # shoreline service internal port
    tidewhisperer: 9127                                               # tidewhisperer service internal port
  aws:
    region: us-west-2                                                 # AWS region service to be deployed in
  environment: production                                             #
  fullnameOverride: ""                                                #
  namespace:
    create: false                                                     # whether to create the namespace for the service
  nameOverride: ""                                                    # the name to use for the helm chart, if given
  mongo:
    hosts: "mongodb"                                                  # comma-separated list of Mongo hosts
    port: 27017                                                       # the Mongo port
    username: ''                                                      # a username in the Mongo instance
    ssl: 'false'                                                      # whether to use SSL to communicate with Mongo
    optParams: ''                                                     # optional parameters to pass on the Mongo connection string
  provider:
    dexcom:
      token:
        url: 'https://api.dexcom.com/v1/oauth2/token'                 # the url to retrieve an Oauth2 token from Dexcom
      authorize:
        url: 'https://api.dexcom.com/v1/oauth2/login?prompt=login'    # the url to get authorization from Dexcom
      client:
        url: "https://api.dexcom.com"                                 # the Dexcom client API url
  hosts:
    default:
      protocol:
        http                                                          # the protocol to use for signup emails
      host:
        localhost                                                     # a valid DNS name for the service
    http:                                                             # a map of hosts that provide HTTP access to the service
      localhost:                                                      # a simple identifier for a host providing HTTP access
        name: localhost                                               # a DNS name for a host providing HTTP access
      localhost3000:                                                  # when port forwarding, you need to add the port value to the hostname
        name: "localhost:3000"                                        # a DNS name for a host providing HTTP access
    #https:                                                           # a map of hosts that provide HTTPS access to the service
      #dev:                                                           # a map of hosts that provide HTTPS access to the service
        #name: dev.tidepool.org                                       # a simple identifier for a host providing HTTPS access
        #tlssecret:                                                   # a TLS secret containing the Cert for the host
          #name: tidepool-org                                         # the name of the TLS secret
          #namespace: default                                         # the namespace of the TLS secret

  resources:                                                          # the resources for each service
    limits:
      cpu: 200m
      memory: 128Mi
    requests:
      cpu: 50m
      memory: 32Mi
    #
  securityContext:                                                    # the security context for all services
    allowPrivilegeEscalation: false
    runAsNonRoot: true                                                # we don't need root access
    runAsUser: 10101
    capabilities:
      drop:
      - ALL

# Tidepool services
blip:
  image: tidepool/blip:release-1.23.0-264f7ad48eb7d8099b00dce07fa8576f7068d0a0
export:
  image: tidepool/export:develop-b00327cf2a986cf4c63aecc9140c1df63c5caa59
  enabled: true
gatekeeper:
  image: tidepool/gatekeeper:mongo-protocol-6aca03f0c94cb2da1e5f7b03d2c114ba3bb407cf
highwater:
  image: tidepool/highwater:fixlodash-01293b71525c355885ccf4eefa2af47c3ebfc749
hydrophone:
  image: tidepool/hydrophone:develop-01ca8c05bb2abcaaa620e26f874e331dc2111dad
  fromAddress: "Tidepool <noreply@tidepool.org>"                      # from address for emails that we send
  #bucket: ''                                                         # S3 bucket with email templates
jellyfish:
  enabled: true
  image: tidepool/jellyfish:develop-2f3317c41346586bdbed305de17dad37307975a4
messageapi:
  image: tidepool/message-api:develop-931e662ab52db12187a66559673cee5fb9f9e638
  window: 21
auth:
  image: tidepool/platform-auth:quiet-logging-fe1ee6ee7cfac005c89d28bca5db371a19c55a99
blob:
  image: tidepool/platform-blob:quiet-logging-fe1ee6ee7cfac005c89d28bca5db371a19c55a99
  directory: "_data/blobs"                                            # directory to use if using local file storage
  prefix: "blobs"                                                     # prefix to use if using local file storage
data:
  image: tidepool/platform-data:develop-3324c19a0a6dd24b51aadfa759ed751672b2a9ee
image:
  image: tidepool/platform-image:quiet-logging-fe1ee6ee7cfac005c89d28bca5db371a19c55a99
  directory: "_data/image"                                            # directory to use if using local file storage
  prefix: "images"                                                    # prefix to use if using local file storage
migrations:
  enabled: true
  image: tidepool/platform-migrations:quiet-logging-fe1ee6ee7cfac005c89d28bca5db371a19c55a99
notification:
  image: tidepool/platform-notification:quiet-logging-fe1ee6ee7cfac005c89d28bca5db371a19c55a99
task:
  image: tidepool/platform-task:quiet-logging-fe1ee6ee7cfac005c89d28bca5db371a19c55a99
tools:
  enabled: true
  image: tidepool/platform-tools:quiet-logging-fe1ee6ee7cfac005c89d28bca5db371a19c55a99
user:
  image: tidepool/platform-user:quiet-logging-fe1ee6ee7cfac005c89d28bca5db371a19c55a99
seagull:
  image: tidepool/seagull:develop-93020eb645a4dbc723128809a5d8367ed4c6ddee
shoreline:
  image: tidepool/shoreline:mongo-scheme-6d2cfb4c964de2d988f819a2b47adf95edab753d
tidewhisperer:
  image: tidepool/tide-whisperer:mongo-scheme-3bc97a9629da32dc8b9fb2c3495a35a16a59cbae

