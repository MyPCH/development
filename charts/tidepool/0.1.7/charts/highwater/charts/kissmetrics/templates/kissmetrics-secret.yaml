{{ if or .Values.global.secret.enabled  .Values.secret.enabled -}}
---
apiVersion: v1
{{ with .Values.secret.data_ -}}
data:
  APIKey: {{ .APIKey | default "" | b64enc | quote  }}
  Token: {{ .Token | default "" | b64enc  | quote }}
  UCSFAPIKey: {{ .UCSFAPIKey | default "" | b64enc | quote }}
  UCSFWhitelist: {{ .UCSFWhitelist | default "" | b64enc | quote }}
{{- end }}
kind: Secret
metadata:
  name: dexcom
  namespace: {{ .Release.Namespace }}
type: Opaque
{{- end }}
