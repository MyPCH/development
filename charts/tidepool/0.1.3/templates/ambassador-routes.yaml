# Auto-generated file by ambassador_gateway. Do not edit.
{{ if (eq .Values.gateway.name "ambassador") }}
--- #file: {{.Release.Namespace}}-blip.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-app.tidepool.org|{{.Release.Namespace}}-app-internal'
host_regex: true
kind: Mapping
method: GET|OPTIONS|POST|PUT|PATCH|DELETE
method_regex: true
name: '{{.Release.Namespace}}-blip'
prefix: /
rewrite: ''
service: blip.{{.Release.Namespace}}:3000
--- #file: {{.Release.Namespace}}-export.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|OPTIONS|POST|PUT|PATCH|DELETE
method_regex: true
name: '{{.Release.Namespace}}-export'
path_redirect: 'false'
prefix: /export/
rewrite: /
service: export.{{.Release.Namespace}}:9300
--- #file: {{.Release.Namespace}}-gatekeeper-access.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|OPTIONS|POST|PUT|PATCH|DELETE
method_regex: true
name: '{{.Release.Namespace}}-gatekeeper-access'
prefix: /access/
rewrite: ''
service: gatekeeper.{{.Release.Namespace}}:9123
--- #file: {{.Release.Namespace}}-highwater-metrics.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|OPTIONS|POST|PUT|PATCH|DELETE
method_regex: true
name: '{{.Release.Namespace}}-highwater-metrics'
path_redirect: 'false'
prefix: /metrics/
rewrite: /
service: highwater.{{.Release.Namespace}}:9191
--- #file: {{.Release.Namespace}}-hydrophone-confirm.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|OPTIONS|POST|PUT|PATCH|DELETE
method_regex: true
name: '{{.Release.Namespace}}-hydrophone-confirm'
path_redirect: 'false'
prefix: /confirm/
rewrite: /
service: hydrophone.{{.Release.Namespace}}:9157
--- #file: {{.Release.Namespace}}-jellyfish.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-default-uploads-internal.tidepool.org|{{.Release.Namespace}}-default-uploads-internal-internal'
host_regex: true
kind: Mapping
method: GET|OPTIONS|POST|PUT|PATCH|DELETE
method_regex: true
name: '{{.Release.Namespace}}-jellyfish'
path_redirect: 'false'
prefix: /
rewrite: ''
service: jellyfish.{{.Release.Namespace}}:9122
--- #file: {{.Release.Namespace}}-message-api-message.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|OPTIONS|POST|PUT|PATCH|DELETE
method_regex: true
name: '{{.Release.Namespace}}-message-api-message'
path_redirect: 'false'
prefix: /message/
rewrite: /
service: message-api.{{.Release.Namespace}}:9119
--- #file: {{.Release.Namespace}}-auth-authorize.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|DELETE
method_regex: true
name: '{{.Release.Namespace}}-auth-authorize'
prefix: /v1/oauth/[^/]+/authorize
prefix_regex: true
rewrite: ''
service: auth.{{.Release.Namespace}}:9222
--- #file: {{.Release.Namespace}}-auth-provider-sessions.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|PUT|DELETE
method_regex: true
name: '{{.Release.Namespace}}-auth-provider-sessions'
prefix: /v1/provider_sessions/[^/]+
prefix_regex: true
rewrite: ''
service: auth.{{.Release.Namespace}}:9222
--- #file: {{.Release.Namespace}}-auth-redirect.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET
name: '{{.Release.Namespace}}-auth-redirect'
prefix: /v1/oauth/[^/]+/redirect
prefix_regex: true
rewrite: ''
service: auth.{{.Release.Namespace}}:9222
--- #file: {{.Release.Namespace}}-auth-restricted-tokens.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|PUT|DELETE
method_regex: true
name: '{{.Release.Namespace}}-auth-restricted-tokens'
prefix: /v1/restricted_tokens
rewrite: ''
service: auth.{{.Release.Namespace}}:9222
--- #file: {{.Release.Namespace}}-auth-user-provider-sessions.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|POST|DELETE
method_regex: true
name: '{{.Release.Namespace}}-auth-user-provider-sessions'
prefix: /v1/users/[^/]+/provider_sessions
prefix_regex: true
rewrite: ''
service: auth.{{.Release.Namespace}}:9222
--- #file: {{.Release.Namespace}}-auth-user-restricted-tokens.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|POST|DELETE
method_regex: true
name: '{{.Release.Namespace}}-auth-user-restricted-tokens'
prefix: /v1/users/[^/]+/restricted_tokens
prefix_regex: true
rewrite: ''
service: auth.{{.Release.Namespace}}:9222
--- #file: {{.Release.Namespace}}-blob-blobs.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|DELETE
method_regex: true
name: '{{.Release.Namespace}}-blob-blobs'
prefix: /v1/blobs/[^/]+
prefix_regex: true
rewrite: ''
service: blob.{{.Release.Namespace}}:9225
--- #file: {{.Release.Namespace}}-blob-blobs-content.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET
name: '{{.Release.Namespace}}-blob-blobs-content'
prefix: /v1/blobs/[^/]+/content
prefix_regex: true
rewrite: ''
service: blob.{{.Release.Namespace}}:9225
--- #file: {{.Release.Namespace}}-blob-user-blobs.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|POST|DELETE
method_regex: true
name: '{{.Release.Namespace}}-blob-user-blobs'
prefix: /v1/users/[^/]+/blobs
prefix_regex: true
rewrite: ''
service: blob.{{.Release.Namespace}}:9225
--- #file: {{.Release.Namespace}}-data-data.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|OPTIONS|POST|PUT|PATCH|DELETE
method_regex: true
name: '{{.Release.Namespace}}-data-data'
path_redirect: 'false'
prefix: /v1/data/
rewrite: /
service: data.{{.Release.Namespace}}:9220
--- #file: {{.Release.Namespace}}-data-data_sets.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET
name: '{{.Release.Namespace}}-data-data_sets'
prefix: /v1/data_sets
rewrite: ''
service: data.{{.Release.Namespace}}:9220
--- #file: {{.Release.Namespace}}-data-data_sources.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|PUT|DELETE
method_regex: true
name: '{{.Release.Namespace}}-data-data_sources'
prefix: /v1/data_sources/[^/]+
prefix_regex: true
rewrite: ''
service: data.{{.Release.Namespace}}:9220
--- #file: {{.Release.Namespace}}-data-dataservices.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|OPTIONS|POST|PUT|PATCH|DELETE
method_regex: true
name: '{{.Release.Namespace}}-data-dataservices'
path_redirect: 'false'
prefix: /dataservices/
rewrite: /
service: data.{{.Release.Namespace}}:9220
--- #file: {{.Release.Namespace}}-data-datasets.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: POST|PUT|DELETE
method_regex: true
name: '{{.Release.Namespace}}-data-datasets'
prefix: /v1/datasets
rewrite: ''
service: data.{{.Release.Namespace}}:9220
--- #file: {{.Release.Namespace}}-data-time.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET
name: '{{.Release.Namespace}}-data-time'
prefix: /v1/time
rewrite: ''
service: data.{{.Release.Namespace}}:9220
--- #file: {{.Release.Namespace}}-data-user_data.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: DELETE
name: '{{.Release.Namespace}}-data-user_data'
prefix: /v1/users/[^/]+/data
prefix_regex: true
rewrite: ''
service: data.{{.Release.Namespace}}:9220
--- #file: {{.Release.Namespace}}-data-user_data_sets.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET
name: '{{.Release.Namespace}}-data-user_data_sets'
prefix: /v1/users/[^/]+/data_sets
prefix_regex: true
rewrite: ''
service: data.{{.Release.Namespace}}:9220
--- #file: {{.Release.Namespace}}-data-user_data_sources.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|POST|DELETE|OPTIONS
method_regex: true
name: '{{.Release.Namespace}}-data-user_data_sources'
prefix: /v1/users/[^/]+/data_sources
prefix_regex: true
rewrite: ''
service: data.{{.Release.Namespace}}:9220
--- #file: {{.Release.Namespace}}-data-user_datasets.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|POST
method_regex: true
name: '{{.Release.Namespace}}-data-user_datasets'
prefix: /v1/users/[^/]+/datasets
prefix_regex: true
rewrite: ''
service: data.{{.Release.Namespace}}:9220
--- #file: {{.Release.Namespace}}-image.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|PUT|DELETE
method_regex: true
name: '{{.Release.Namespace}}-image'
prefix: /v1/images
prefix_regex: false
rewrite: ''
service: image.{{.Release.Namespace}}:9226
--- #file: {{.Release.Namespace}}-image-users-images.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|POST|DELETE
method_regex: true
name: '{{.Release.Namespace}}-image-users-images'
prefix: /v1/users/[^/]+/images
prefix_regex: true
rewrite: ''
service: image.{{.Release.Namespace}}:9226
--- #file: {{.Release.Namespace}}-image-users-images-regex.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|POST|DELETE
method_regex: true
name: '{{.Release.Namespace}}-image-users-images-regex'
prefix: /v1/users/[^/]+/images/.+
prefix_regex: true
rewrite: ''
service: image.{{.Release.Namespace}}:9226
--- #file: {{.Release.Namespace}}-task-tasks.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|POST
method_regex: true
name: '{{.Release.Namespace}}-task-tasks'
prefix: /v1/tasks
rewrite: ''
service: task.{{.Release.Namespace}}:9224
--- #file: {{.Release.Namespace}}-task-tasks-id.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|PUT|DELETE
method_regex: true
name: '{{.Release.Namespace}}-task-tasks-id'
prefix: /v1/tasks/[^/*]
prefix_regex: true
rewrite: ''
service: task.{{.Release.Namespace}}:9224
--- #file: {{.Release.Namespace}}-user-users.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|DELETE
method_regex: true
name: '{{.Release.Namespace}}-user-users'
prefix: /v1/users/[^/*]
prefix_regex: true
rewrite: ''
service: user.{{.Release.Namespace}}:9221
--- #file: {{.Release.Namespace}}-user-userservices.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|OPTIONS|POST|PUT|PATCH|DELETE
method_regex: true
name: '{{.Release.Namespace}}-user-userservices'
path_redirect: 'false'
prefix: /userservices/
rewrite: /
service: user.{{.Release.Namespace}}:9221
--- #file: {{.Release.Namespace}}-seagull.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|OPTIONS|POST|PUT|PATCH|DELETE
method_regex: true
name: '{{.Release.Namespace}}-seagull'
path_redirect: 'false'
prefix: /metadata/
rewrite: /
service: seagull.{{.Release.Namespace}}:9120
--- #file: {{.Release.Namespace}}-shoreline-auth.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|OPTIONS|POST|PUT|PATCH|DELETE
method_regex: true
name: '{{.Release.Namespace}}-shoreline-auth'
path_redirect: 'false'
prefix: /auth/
rewrite: /
service: shoreline.{{.Release.Namespace}}:9107
--- #file: {{.Release.Namespace}}-tide-whisperer-data.yaml
apiVersion: getambassador.io/v1
host: '{{.Release.Namespace}}-api.tidepool.org|{{.Release.Namespace}}-api-internal'
host_regex: true
kind: Mapping
method: GET|OPTIONS|POST|PUT|PATCH|DELETE
method_regex: true
name: '{{.Release.Namespace}}-tide-whisperer-data'
path_redirect: 'false'
prefix: /data/
rewrite: /
service: tide-whisperer.{{.Release.Namespace}}:9127
{{ end }}
