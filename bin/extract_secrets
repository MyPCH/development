#!/usr/local/bin/python3
#
# Create/update/delete secrets managed in Amazon External Secrets
#
# Usage: $0 file create|update|delete|dryrun ${CLUSTER_NAME} encoded|plaintext

import base64
import json
import os
import sys

import boto3
import yaml

docs = list(yaml.safe_load_all(sys.stdin))
for manifest in docs:
    if manifest and "kind" in manifest and manifest["kind"] == "Secret":
        print("---")
        print(yaml.dump(manifest))

