#!/bin/bash
# reports the current URL/branch/path that weave is tracking
#
weaveargs=$(kubectl get pods -o json | jq '.items[].spec.containers | .[] | select(.name=="flux") | .args')
path=$(echo $weaveargs | jq '.[] | select(startswith("--git-path"))' | sed -e "s/--git-path=//" -e "s/\"//g")
branch=$(echo $weaveargs | jq '.[] | select(startswith("--git-branch"))' | sed -e "s/--git-branch=//" -e "s/\"//g")
repo=$(echo $weaveargs | jq '.[] | select(startswith("--git-url"))' | sed -e "s/--git-url=//" -e "s/\"//g")
echo $repo 
echo $branch
echo $path
