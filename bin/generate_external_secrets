#!/bin/bash
#
# Generate external secrets from secrets in values file
#

if [ $# -ne 1 ]
then 
	echo "Usage: $0 "\${ENVIRONMENT} \${SECRETS_FILE}"
	exit
fi
ENVIRONMENT=$1
SECRETS_FILE=$2

if [ -z "$CLUSTER_NAME" ]
then
	echo "\$CLUSTER_NAME required."
	exit
fi

external_secret <(generate_secrets $ENVIRONMENT $SECRETS_FILE) dryrun ${CLUSTER_NAME} encoded 

