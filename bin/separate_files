#!/usr/local/bin/python3
#
# Generate separate files (into the current directory) from a YAML map  whose keys are the file names and the values are file contents
# Optionally add a header and a footer
#
# Usagte: $0 ${HEADER} ${FOOTER}
#

import yaml
import sys
import re

input = yaml.safe_load(sys.stdin)
 
for name, manifest in input.items():

    with open(name + ".yaml", "w") as out:
       if "kind" in manifest and manifest["kind"] == "Secret":
            yaml.dump(manifest, out)
       out.flush()
    
