---
apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: tidepool
  namespace: qa2
  annotations:
    flux.weave.works/automated: "true"
    flux.weave.works/tag.shoreline: "glob:develop-*"
    flux.weave.works/tag.tidewhisperer: "glob:develop-*"
    flux.weave.works/tag.blip: "glob:develop-*"
    flux.weave.works/tag.gatekeeper: "glob:develop-*"
    flux.weave.works/tag.highwater: "glob:develop-*"
    flux.weave.works/tag.jellyfish: "glob:develop-*"
    flux.weave.works/tag.mailhog: "semver:1.*"
    flux.weave.works/tag.export: "glob:develop-*"
    flux.weave.works/tag.seagull: "glob:develop-*"
    flux.weave.works/tag.hydrophone: "glob:develop-*"
    flux.weave.works/tag.messageapi: "glob:develop-*"
    flux.weave.works/tag.platformAuth: "glob:develop-*"
    flux.weave.works/tag.platformBlob: "glob:develop-*"
    flux.weave.works/tag.platformData: "glob:develop-*"
    flux.weave.works/tag.platformImage: "glob:develop-*"
    flux.weave.works/tag.platformMigrations: "glob:develop-*"
    flux.weave.works/tag.platformNotification: "glob:develop-*"
    flux.weave.works/tag.platformTask: "glob:develop-*"
    flux.weave.works/tag.platformTools: "glob:develop-*"
    flux.weave.works/tag.platformUser: "glob:develop-*"
spec:
  skipDepUpdate: true
  chart:
    git: git@github.com:tidepool-org/development
    path: charts/tidepool/0.1.0
    ref: k8s
  values:
    usessl: true
    domain: "tidepool.org"
    ambassador:
      enabled: false
    mongo:
      enabled: false
    gloo:
      enabled: false
      namespace:
        create: false
    hostnameOverride: ""
    includeSecrets: false
    blip:
      image: tidepool/blip:develop-196a7cd51448dd5ed98c88d0d3887e3bba7f0cf8
    export:
      image: tidepool/export:develop-b00327cf2a986cf4c63aecc9140c1df63c5caa59
    gatekeeper:
      image: tidepool/gatekeeper:develop-5a2a1732a0c2ee8da35131514c87ad1ffbe4fdf3
    highwater:
      image: tidepool/highwater:develop-8c74ba688ffe169b1945c05f14d5918fb5a4eb11
    hydrophone:
      image: tidepool/hydrophone:develop-40c8f4fc6da0dfaee96745b87be3a6f44b5d0522
      ses:
        fromAddress: "Tidepool <noreply@tidepool.org>"
    jellyfish:
      enabled: true
      image: tidepool/jellyfish:develop-d78ef3cdc4f3cea2a30187ed15ac6a618bfa604b
      storage: "aws/s3"
      bucket: "" # ensures that the generated bucket name is used
    messageapi:
      image: tidepool/message-api:develop-6b6649bc5a5000373a113d612c2075d69f6c26da
    mailhog:
      image: mailhog/mailhog:v1.0.0
    platformAuth:
      image: tidepool/platform-auth:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    platformBlob:
      image: tidepool/platform-blob:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
      service:
        unstructured:
          store:
            type: s3
            s3:
              bucket: "" # ensures that the generated bucket name is used
              prefix: "blobs"
    platformData:
      image: tidepool/platform-data:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    platformImage:
      image: tidepool/platform-image:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
      service:
        unstructured:
          store:
            type: s3
            s3:
              bucket: ""  # ensures that the generated bucket name is used
              prefix: "images"
    platformMigrations:
      image: tidepool/platform-migrations:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    platformNotification:
      image: tidepool/platform-notification:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    platformTask:
      image: tidepool/platform-task:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    platformTools:
      image: tidepool/platform-tools:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    platformUser:
      image: tidepool/platform-user:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    seagull:
      image: tidepool/seagull:develop-f564e48a4df43544cb950ea5fc622bc54aa2e847
    shoreline:
      image: tidepool/shoreline:develop-580fcb334d61ade1b83c6ae35148977fdb18dc3d
    tidewhisperer:
      image: tidepool/tide-whisperer:develop-ec81a5ef85bd39f3041320dfe86f042fc19dd960
