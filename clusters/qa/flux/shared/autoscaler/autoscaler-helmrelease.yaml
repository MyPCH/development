apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: autoscaler
  namespace: autoscaler
spec:
  releaseName: autoscaler
  chart:
    repository: https://kubernetes-charts.storage.googleapis.com/
    name: cluster-autoscaler
    version: 0.14.2
  values: 
    autoDiscovery:
      clusterName: qatest
    awsRegion: us-west-2
    serviceMonitor:
      enabled: true
    sslCertHostPath: /etc/ssl/certs/ca-bundle.crt
    extraArgs:
      v: 4
      stderrthreshold: info
      logtostderr: true
      skip-nodes-with-local-storage: false
      podAnnotations:
        iam.amazonaws.com/role: k8s-autoscaler
