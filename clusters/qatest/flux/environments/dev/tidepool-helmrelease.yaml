---
apiVersion: flux.weave.works/v1beta1
kind: HelmRelease
metadata:
  name: tidepool
  namespace: dev
  annotations:
    flux.weave.works/automated: "true"
    #flux.weave.works/tag.shoreline: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.tidewhisperer: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.blip: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.gatekeeper: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.highwater: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.jellyfish: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.export: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.seagull: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.hydrophone: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.messageapi: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.auth: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.blob: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.data: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.image: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.migrations: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.notification: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.task: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.tools: regexp:^v\d+\.\d+\.\d+$
    #flux.weave.works/tag.user: regexp:^v\d+\.\d+\.\d+$
    flux.weave.works/tag.auth: glob:develop-*
    flux.weave.works/tag.blip: glob:develop-*
    flux.weave.works/tag.blob: glob:develop-*
    flux.weave.works/tag.data: glob:develop-*
    flux.weave.works/tag.export: glob:develop-*
    flux.weave.works/tag.gatekeeper: glob:develop-*
    flux.weave.works/tag.highwater: glob:develop-*
    flux.weave.works/tag.hydrophone: glob:develop-*
    flux.weave.works/tag.image: glob:develop-*
    flux.weave.works/tag.jellyfish: glob:develop-*
    flux.weave.works/tag.messageapi: glob:develop-*
    flux.weave.works/tag.migrations: glob:develop-*
    flux.weave.works/tag.notification: glob:develop-*
    flux.weave.works/tag.seagull: glob:develop-*
    flux.weave.works/tag.shoreline: glob:debug-*
    flux.weave.works/tag.task: glob:develop-*
    flux.weave.works/tag.tidewhisperer: glob:develop-*
    flux.weave.works/tag.tools: glob:develop-*
    flux.weave.works/tag.user: glob:develop-*
spec:
  releaseName: dev-tidepool
  chart:
    git: git@github.com:tidepool-org/development
    path: charts/tidepool/0.1.5
    ref: k8s
  values:
    global:
      hosts:
        default:
          protocol: https
          host: dev.tidepool.org
        http: {}
        https:
          dev:
            name: dev.tidepool.org
            tlssecret:
              name: tidepool-org
              namespace: default
          api:
            name: dev-api.tidepool.org
            tlssecret:
              name: tidepool-org
              namespace: default
          app:
            name: dev-app.tidepool.org
            tlssecret:
              name: tidepool-org
              namespace: default
          uploads:
            name: dev-uploads.tidepool.org
            tlssecret:
              name: tidepool-org
              namespace: default
      gateway:
        name: gloo
      mongo:
        enabled: false
        #host: "ip-10-48-33-162.us-west-2.compute.internal"     # db.dev.private.tidepool.org
        primary: "cluster0-shard-00-00-hu2cn.mongodb.net"
        hosts:
        - "cluster0-shard-00-00-hu2cn.mongodb.net"
        - "cluster0-shard-00-01-hu2cn.mongodb.net"
        - "cluster0-shard-00-02-hu2cn.mongodb.net"
        port: 27017
        username: derrickburns
        password: ihHY12klOHnMDgut
        tls: 'true'
        optParams: 'replicaSet=Cluster0-shard-0&authSource=admin&w=majority'
      includeSecrets: false
      namespace:
        create: false
    nosqlclient:
      enabled: false
    blip:
      image: tidepool/blip:develop-beecd9352cf39e77186a41d16a5d8882924f88d6
    export:
      enabled: true
      image: tidepool/export:develop-b00327cf2a986cf4c63aecc9140c1df63c5caa59
    gatekeeper:
      image: tidepool/gatekeeper:develop-3cf9c595ea59c7d25907d82416f9ab824819caee
    highwater:
      image: tidepool/highwater:develop-3f0838c29e726230b616638d97f593ba07607bab
      salt: "DVkFvvX1dr1PBw4YmMkI"
    hydrophone:
      image: tidepool/hydrophone:develop-305e1a6b2950a97de3f2773d5c19033e3d26d15f
    jellyfish:
      image: tidepool/jellyfish:develop-53fdb17c447025698142c55d4ccb16ad01958b4c
    messageapi:
      image: tidepool/message-api:develop-c3369b1d9d4e7890815a98f8c18c7260accae950
    auth:
      image: tidepool/platform-auth:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    blob:
      image: tidepool/platform-blob:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    data:
      image: tidepool/platform-data:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    image:
      image: tidepool/platform-image:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    migrations:
      image: tidepool/platform-migrations:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    notification:
      enabled: false
      image: tidepool/platform-notification:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    task:
      image: tidepool/platform-task:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    tools:
      enabled: false
      image: tidepool/platform-tools:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    user:
      image: tidepool/platform-user:develop-8f6f88ace8f5f6852876201b2ba5e0e1ffae3f5f
    seagull:
      image: tidepool/seagull:develop-3a1a227a62e86755a577bbdd3df5ee5a096e7864
      salt: "Seagulls are the salt of the earth, without them, the coastline would\
        \ not smell of dead fish"
    shoreline:
      image: tidepool/shoreline:debug-5c12cfb915a007ae70a9735b4d04c2a35920ae7f
      salt: "fuheqwiuhfkjkljdsoifkqm"
      longtermkey: "bnthqfizruxgjsmckpwevaoydl"
      clinicDemoUserId: "e79b15328a"
      mailchimp:
        url: "https://us7.api.mailchimp.com/3.0"
        personalLists: >
          [
            {
              "id": "d79b5a3924",
              "interests": {
                "35d99df867": true
              }
            },
            {
              "id": "461feca051"
            }
          ]
        clinicLists: >
          [
            {
              "id": "d79b5a3924",
              "interests": {
                "35d99df867": true,
                "03cab91941": true
              }
            },
            {
              "id": "627a2577da"
            }
          ]
    tidewhisperer:
      image: tidepool/tide-whisperer:develop-e1dcac6e6ef3cd8a522848f9ff371c63dcbfbbbe
