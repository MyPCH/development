apiVersion: gateway.solo.io/v1
kind: VirtualService
metadata:
  name: default
  namespace: gloo-system
spec:
  virtualHost:
    domains:
    - '*'
    name: gloo-system.default
    routes:
    - matcher:
        prefix: /userservices/
      routeAction:
        single:
          upstream:
            name: default-platform-user-9221
            namespace: gloo-system
    - matcher:
        methods:
        - GET
        - POST
        prefix: /v1/tasks
      routeAction:
        single:
          upstream:
            name: default-platform-task-9224
            namespace: gloo-system
    - matcher:
        methods:
        - GET
        - PUT
        - DELETE
        regex: /v1/images
      routeAction:
        single:
          upstream:
            name: default-platform-image-9226
            namespace: gloo-system
    - matcher:
        methods:
        - POST
        - GET
        - DELETE
        regex: /v1/users/[^/]+/images
      routeAction:
        single:
          upstream:
            name: default-platform-image-9226
            namespace: gloo-system
    - matcher:
        prefix: /dataservices/
      routeAction:
        single:
          upstream:
            name: default-platform-data-9220
            namespace: gloo-system
      routePlugins:
        prefixRewrite:
          prefixRewrite: /
    - matcher:
        prefix: /v1/data/
      routeAction:
        single:
          upstream:
            name: default-platform-data-9220
            namespace: gloo-system
      routePlugins:
        prefixRewrite:
          prefixRewrite: /
    - matcher:
        methods:
        - GET
        - POST
        - DELETE
        regex: /v1/users/[^/]+/data_sources
      routeAction:
        single:
          upstream:
            name: default-platform-data-9220
            namespace: gloo-system
    - matcher:
        methods:
        - GET
        regex: /v1/users/[^/]+/data_sets
      routeAction:
        single:
          upstream:
            name: default-platform-data-9220
            namespace: gloo-system
    - matcher:
        methods:
        - GET
        - POST
        regex: /v1/users/[^/]+/datasets
      routeAction:
        single:
          upstream:
            name: default-platform-data-9220
            namespace: gloo-system
    - matcher:
        methods:
        - DELETE
        regex: /v1/users/[^/]+/data
      routeAction:
        single:
          upstream:
            name: default-platform-data-9220
            namespace: gloo-system
    - matcher:
        methods:
        - GET
        prefix: /v1/time
      routeAction:
        single:
          upstream:
            name: default-platform-data-9220
            namespace: gloo-system
    - matcher:
        methods:
        - GET
        - PUT
        - DELETE
        regex: /v1/data_sources/[^/]+
      routeAction:
        single:
          upstream:
            name: default-platform-data-9220
            namespace: gloo-system
    - matcher:
        methods:
        - GET
        prefix: /v1/data_sets
      routeAction:
        single:
          upstream:
            name: default-platform-data-9220
            namespace: gloo-system
    - matcher:
        methods:
        - GET
        - POST
        - DELETE
        regex: /v1/users/[^/]+/blobs
      routeAction:
        single:
          upstream:
            name: default-platform-blob-9225
            namespace: gloo-system
    - matcher:
        methods:
        - GET
        - DELETE
        regex: /v1/blobs/[^/]+
      routeAction:
        single:
          upstream:
            name: default-platform-blob-9225
            namespace: gloo-system
    - matcher:
        methods:
        - GET
        - DELETE
        - PUT
        regex: /v1/users/[^/]+/restricted_tokens
      routeAction:
        single:
          upstream:
            name: default-platform-auth-9222
            namespace: gloo-system
    - matcher:
        methods:
        - GET
        - DELETE
        - PUT
        regex: /v1/users/[^/]+/provider_sessions
      routeAction:
        single:
          upstream:
            name: default-platform-auth-9222
            namespace: gloo-system
    - matcher:
        methods:
        - GET
        - DELETE
        - PUT
        regex: /v1/restricted_tokens
      routeAction:
        single:
          upstream:
            name: default-platform-auth-9222
            namespace: gloo-system
    - matcher:
        methods:
        - GET
        - DELETE
        - PUT
        regex: /v1/provider_sessions/[^/]+
      routeAction:
        single:
          upstream:
            name: default-platform-auth-9222
            namespace: gloo-system
    - matcher:
        methods:
        - GET
        - DELETE
        regex: /v1/oauth/[^/]+/authorize
      routeAction:
        single:
          upstream:
            name: default-platform-auth-9222
            namespace: gloo-system
    - matcher:
        prefix: /data/
      routeAction:
        single:
          upstream:
            name: default-tide-whisperer-9127
            namespace: gloo-system
      routePlugins:
        prefixRewrite:
          prefixRewrite: /
    - matcher:
        prefix: /auth/
      routeAction:
        single:
          upstream:
            name: default-shoreline-9107
            namespace: gloo-system
      routePlugins:
        prefixRewrite:
          prefixRewrite: /
    - matcher:
        prefix: /metadata/
      routeAction:
        single:
          upstream:
            name: default-seagull-9120
            namespace: gloo-system
      routePlugins:
        prefixRewrite:
          prefixRewrite: /
    - matcher:
        methods:
        - GET
        - DELETE
        regex: /v1/users/[^/*]
      routeAction:
        single:
          upstream:
            name: default-platform-user-9221
            namespace: gloo-system
    - matcher:
        methods:
        - POST
        - PUT
        - DELETE
        regex: /v1/tasks/[^/*]
      routeAction:
        single:
          upstream:
            name: default-platform-task-9224
            namespace: gloo-system
    - matcher:
        methods:
        - POST
        - PUT
        - DELETE
        regex: /v1/users/[^/]+/images/.+s
      routeAction:
        single:
          upstream:
            name: default-platform-image-9226
            namespace: gloo-system
    - matcher:
        methods:
        - POST
        - PUT
        - DELETE
        prefix: /v1/datasets
      routeAction:
        single:
          upstream:
            name: default-platform-data-9220
            namespace: gloo-system
    - matcher:
        regex: /v1/blobs/[^/]+/content
      routeAction:
        single:
          upstream:
            name: default-platform-blob-9225
            namespace: gloo-system
    - matcher:
        regex: /v1/oauth/[^/]+/redirect
      routeAction:
        single:
          upstream:
            name: default-platform-auth-9222
            namespace: gloo-system
    - matcher:
        prefix: /message/
      routeAction:
        single:
          upstream:
            name: default-message-api-9119
            namespace: gloo-system
      routePlugins:
        prefixRewrite:
          prefixRewrite: /
    - matcher:
        prefix: /confirm/
      routeAction:
        single:
          upstream:
            name: default-hydrophone-9157
            namespace: gloo-system
      routePlugins:
        prefixRewrite:
          prefixRewrite: /
    - matcher:
        prefix: /metrics/
      routeAction:
        single:
          upstream:
            name: default-highwater-9191
            namespace: gloo-system
      routePlugins:
        prefixRewrite:
          prefixRewrite: /
    - matcher:
        prefix: /access/
      routeAction:
        single:
          upstream:
            name: default-gatekeeper-9123
            namespace: gloo-system
    - matcher:
        prefix: /export/
      routeAction:
        single:
          upstream:
            name: default-export-9300
            namespace: gloo-system
      routePlugins:
        prefixRewrite:
          prefixRewrite: /
    - matcher:
        prefix: /
      routeAction:
        single:
          upstream:
            name: default-blip-3000
            namespace: gloo-system
