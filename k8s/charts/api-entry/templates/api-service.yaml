---
apiVersion: v1
kind: Service
metadata:
  name: api-entry
  namespace: {{.Release.Namespace}}
  labels:
     service: api-entry
  annotations:
    "service.beta.kubernetes.io/aws-load-balancer-backend-protocol": "http"
    "service.beta.kubernetes.io/aws-load-balancer-cross-zone-load-balancing-enabled": "true"
spec:
  type: LoadBalancer
  externalTrafficPolicy: Cluster
  ports:
   - port: {{.Values.entryport}}
     targetPort: 80
  selector:
    app.kubernetes.io/name: ambassador
    app.kubernetes.io/instance: {{.Release.Namespace -}}-ambassador
