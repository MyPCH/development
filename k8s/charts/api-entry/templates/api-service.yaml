---
apiVersion: v1
kind: Service
metadata:
  name: api-entry
  namespace: {{.Release.Namespace}}
  annotations:
    "service.beta.kubernetes.io/aws-load-balancer-backend-protocol": "http"
    "service.beta.kubernetes.io/aws-load-balancer-cross-zone-load-balancing-enabled": "true"
spec:
  type: LoadBalancer
  externalTrafficPolicy: Local
  ports:
   - port: {{.Values.entryport}}
     targetPort: 80
  selector:
    service: ambassador





    
---
apiVersion: v1
kind: Service
metadata:
  name: ambassador-api
  annotations:
    "service.beta.kubernetes.io/aws-load-balancer-backend-protocol": "http"
    "service.beta.kubernetes.io/aws-load-balancer-cross-zone-load-balancing-enabled": "true"
spec:
  type: LoadBalancer
  externalTrafficPolicy: Local
  ports:
   - port: 8009
     targetPort: 80
  selector:
    service: ambassador