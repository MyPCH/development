 apiVersion: monitoring.coreos.com/v1
 kind: Prometheus
 metadata:
   labels:
     app: ambassador-prometheus
   name: ambassador-prometheus
   namespace: default
 spec:
   alerting:
     alertmanagers:
     - name: default-prometheus-operato-alertmanager
       namespace: default
       pathPrefix: /
       port: web
   baseImage: quay.io/prometheus/prometheus
   routePrefix: /
   ruleNamespaceSelector: {}
   securityContext:
     fsGroup: 2000
     runAsNonRoot: true
     runAsUser: 1000
   serviceAccountName: default-prometheus-operato-prometheus
   serviceMonitorNamespaceSelector: {}
   serviceMonitorSelector:
     matchLabels:
       ambassador: monitoring
---
apiVersion: v1
kind: Service
metadata:
  name: ambaddador-prometheus-svc
spec:
  ports:
  - name: web
    port: 9090
    protocol: TCP
    targetPort: web
  selector:
     app: ambassador-prometheus

